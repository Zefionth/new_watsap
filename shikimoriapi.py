import shikimori_api
from re import sub

def get_info_anime(name: str) -> str:

    session = shikimori_api.Shikimori()
    api = session.get_api()
    search_anime = api.animes.GET(search=name, kind='tv')[0]
    anime = api.animes(search_anime['id']).GET()

    info = []
    name = anime['russian']
    aired_year = anime['aired_on']
    released_year = anime['released_on']
    if released_year == None:
        released_year = '–æ–Ω–≥–æ–∏–Ω–≥'
    rating = anime['score']
    imageUrl = anime['image']['original']
    description = anime['description']
    if description == None:
        description = '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'
    else:
        description = sub(r"[\(\[].*?[\)\]]", "", description)

    if name:
        info.append(
            f"{name}({aired_year.replace('-', '.')} - {released_year.replace('-', '.')})\n"
            f"‚≠ê–†–µ–π—Ç–∏–Ω–≥: {rating}\n"
            f"üìÑ–û–ø–∏—Å–∞–Ω–∏–µ: {description}\n"
            f"üñºÔ∏è–ü–æ—Å—Ç–µ—Ä: https://shikimori.one/{imageUrl}\n"
        )
        return "\n".join(info)
    else:
        return None
